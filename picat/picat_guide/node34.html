<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<!--Converted with LaTeX2HTML 2008 (1.71)
original version by:  Nikos Drakos, CBLU, University of Leeds
* revised and updated by:  Marcus Hennecke, Ross Moore, Herb Swan
* with significant contributions from:
  Jens Lippmann, Marek Rouchal, Martin Wilck and others -->
<HTML>
<HEAD>
<TITLE>Prebuilt Maps</TITLE>
<META NAME="description" CONTENT="Prebuilt Maps">
<META NAME="keywords" CONTENT="picat_guide">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">

<META NAME="Generator" CONTENT="LaTeX2HTML v2008">
<META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css">

<LINK REL="STYLESHEET" HREF="picat_guide.css">

<LINK REL="next" HREF="node36.html">
<LINK REL="previous" HREF="node32.html">
<LINK REL="up" HREF="node4.html">
<LINK REL="next" HREF="node35.html">
</HEAD>

<BODY >

<DIV CLASS="navigation"><!--Navigation Panel-->
<A NAME="tex2html502"
  HREF="node35.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next"
 SRC="/usr/share/latex2html/icons/next.png"></A> 
<A NAME="tex2html498"
  HREF="node4.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up"
 SRC="/usr/share/latex2html/icons/up.png"></A> 
<A NAME="tex2html492"
  HREF="node33.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous"
 SRC="/usr/share/latex2html/icons/prev.png"></A> 
<A NAME="tex2html500"
  HREF="node3.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents"
 SRC="/usr/share/latex2html/icons/contents.png"></A>  
<BR>
<B> Next:</B> <A NAME="tex2html503"
  HREF="node35.html">Example</A>
<B> Up:</B> <A NAME="tex2html499"
  HREF="node4.html">Overview</A>
<B> Previous:</B> <A NAME="tex2html493"
  HREF="node33.html">Example</A>
 &nbsp; <B>  <A NAME="tex2html501"
  HREF="node3.html">Contents</A></B> 
<BR>
<BR></DIV>
<!--End of Navigation Panel-->

<H1><A NAME="SECTION002120000000000000000"></A><A NAME="prebuiltmaps"></A>
<BR>
Prebuilt Maps
</H1>
Picat has three kinds of prebuilt maps: <I>heap</I> maps, <I>global</I> maps, and <I>table</I> maps. Prebuilt heap maps <A NAME="936"></A> are created on the heap immediately after the system is started. The built-in function <TT>get_heap_map(<SPAN CLASS="MATH"><IMG
 WIDTH="29" HEIGHT="15" ALIGN="BOTTOM" BORDER="0"
 SRC="img102.png"
 ALT="$ID$"></SPAN>)</TT><A NAME="1088"></A> returns the heap map that is associated with <SPAN CLASS="MATH"><IMG
 WIDTH="29" HEIGHT="15" ALIGN="BOTTOM" BORDER="0"
 SRC="img102.png"
 ALT="$ID$"></SPAN>, where <SPAN CLASS="MATH"><IMG
 WIDTH="29" HEIGHT="15" ALIGN="BOTTOM" BORDER="0"
 SRC="img102.png"
 ALT="$ID$"></SPAN> must be a ground term. If no heap map is associated with <SPAN CLASS="MATH"><IMG
 WIDTH="29" HEIGHT="15" ALIGN="BOTTOM" BORDER="0"
 SRC="img102.png"
 ALT="$ID$"></SPAN>, then this function establishes an association between <SPAN CLASS="MATH"><IMG
 WIDTH="29" HEIGHT="15" ALIGN="BOTTOM" BORDER="0"
 SRC="img102.png"
 ALT="$ID$"></SPAN> and an unused heap map, and returns the map. A heap map is like a normal map. Users use <TT>put</TT><A NAME="1089"></A> to add key-value pairs into the map<A NAME="941"></A>. Users use <TT>get</TT><A NAME="1090"></A> to retrieve a value that is associated with a key in the map<A NAME="944"></A>. Changes to a heap map up to a choice point are undone when execution backtracks to that choice point. The built-in function <TT>get_heap_map()</TT><A NAME="1091"></A> returns the heap map that is associated with a system-generated default identifier. There are an unlimited number of prebuilt heap maps.

<P>
Global maps <A NAME="947"></A> are created in the global area when the Picat system is started. The built-in function <TT>get_global_map(<SPAN CLASS="MATH"><IMG
 WIDTH="29" HEIGHT="15" ALIGN="BOTTOM" BORDER="0"
 SRC="img102.png"
 ALT="$ID$"></SPAN>)</TT><A NAME="1092"></A> returns the global map that is associated with <SPAN CLASS="MATH"><IMG
 WIDTH="29" HEIGHT="15" ALIGN="BOTTOM" BORDER="0"
 SRC="img102.png"
 ALT="$ID$"></SPAN>, where <SPAN CLASS="MATH"><IMG
 WIDTH="29" HEIGHT="15" ALIGN="BOTTOM" BORDER="0"
 SRC="img102.png"
 ALT="$ID$"></SPAN> must be a ground term. If no global map is associated with <SPAN CLASS="MATH"><IMG
 WIDTH="29" HEIGHT="15" ALIGN="BOTTOM" BORDER="0"
 SRC="img102.png"
 ALT="$ID$"></SPAN>, then this function establishes an association between <SPAN CLASS="MATH"><IMG
 WIDTH="29" HEIGHT="15" ALIGN="BOTTOM" BORDER="0"
 SRC="img102.png"
 ALT="$ID$"></SPAN> and an unused global map, and returns the map. A big difference between a global map and a heap map is that changes to the global map are not undone upon backtracking. When a key-value pair is added into the global map, the variables in the value term are numbered before they are copied to the global area. If the value term contains attributed variables, then the attributes of the variables are not copied, and are therefore lost. When retrieving a value that is associated with a key, the value term in the global area is copied back to the heap after all of the numbered variables are unnumbered. The built-in function <TT>get_global_map()</TT><A NAME="1093"></A> returns the global map that is associated with a system-generated default identifier. The number of prebuilt global maps is 97, and the system halts if a program requests more than 97 global maps.

<P>
Table maps <A NAME="952"></A> are created in the table area when the Picat system is started. The built-in function <TT>get_table_map(<SPAN CLASS="MATH"><IMG
 WIDTH="29" HEIGHT="15" ALIGN="BOTTOM" BORDER="0"
 SRC="img102.png"
 ALT="$ID$"></SPAN>)</TT><A NAME="1094"></A> returns the table map that is associated with <SPAN CLASS="MATH"><IMG
 WIDTH="29" HEIGHT="15" ALIGN="BOTTOM" BORDER="0"
 SRC="img102.png"
 ALT="$ID$"></SPAN>, where <SPAN CLASS="MATH"><IMG
 WIDTH="29" HEIGHT="15" ALIGN="BOTTOM" BORDER="0"
 SRC="img102.png"
 ALT="$ID$"></SPAN> must be a ground term. If no table map is associated with <SPAN CLASS="MATH"><IMG
 WIDTH="29" HEIGHT="15" ALIGN="BOTTOM" BORDER="0"
 SRC="img102.png"
 ALT="$ID$"></SPAN>, then this function establishes an association between <SPAN CLASS="MATH"><IMG
 WIDTH="29" HEIGHT="15" ALIGN="BOTTOM" BORDER="0"
 SRC="img102.png"
 ALT="$ID$"></SPAN> and an unused table map, and returns the map. Like the global map, changes to a table map are not undone upon backtracking. Unlike the global map, however, keys and values are <I>hash-consed</I> so that common ground sub-terms are not replicated in the table area. The built-in function <TT>get_table_map()</TT><A NAME="1095"></A> returns the table map that is associated with a system-generated default identifier. The number of prebuilt table maps is 97, and the system halts if a program requests more than 97 table maps.

<P>
The advantage of using prebuilt maps<A NAME="958"></A> is that data can be accessed everywhere without being passed as arguments, and the disadvantage is that it affects locality of data and thus the readability of programs. In tabled<A NAME="959"></A> programs, using prebuilt maps<A NAME="960"></A> is discouraged because it may cause unanticipated effects.

<P>
<BR><HR>
<!--Table of Child-Links-->
<A NAME="CHILD_LINKS"><STRONG>Subsections</STRONG></A>

<UL CLASS="ChildLinks">
<LI><A NAME="tex2html504"
  HREF="node35.html">Example</A>
</UL>
<!--End of Table of Child-Links-->

<DIV CLASS="navigation"><HR>
<!--Navigation Panel-->
<A NAME="tex2html502"
  HREF="node35.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next"
 SRC="/usr/share/latex2html/icons/next.png"></A> 
<A NAME="tex2html498"
  HREF="node4.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up"
 SRC="/usr/share/latex2html/icons/up.png"></A> 
<A NAME="tex2html492"
  HREF="node33.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous"
 SRC="/usr/share/latex2html/icons/prev.png"></A> 
<A NAME="tex2html500"
  HREF="node3.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents"
 SRC="/usr/share/latex2html/icons/contents.png"></A>  
<BR>
<B> Next:</B> <A NAME="tex2html503"
  HREF="node35.html">Example</A>
<B> Up:</B> <A NAME="tex2html499"
  HREF="node4.html">Overview</A>
<B> Previous:</B> <A NAME="tex2html493"
  HREF="node33.html">Example</A>
 &nbsp; <B>  <A NAME="tex2html501"
  HREF="node3.html">Contents</A></B> </DIV>
<!--End of Navigation Panel-->
<ADDRESS>
Claudio Cesar de Sa
2016-05-29
</ADDRESS>
</BODY>
</HTML>
